<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Document</title>
  </head>
  <body>
    <script>
      /* 
        
            事件循环 --event loop---控制js代码执行的一种机制

            同步和异步


            异步在js中分成了两种
                异步宏任务--》延时器--定时器--ajax
                异步微任务 --》queueMicrotask 创建一个延时0ms的异步微任务，promise.then()  await后面的代码


        事件循环
            第一次事件循环，会先执行  宏任务队列（正在排队）中一个宏任务（第一次会把整个js代码当成一次宏任务去执行），再清空微任务队列中所有微任务（正在排队）

            其他次，会先执行  宏任务队列（正在排队）中一个宏任务，再清空微任务队列中所有微任务（正在排队）
        */

      //同步，按照顺序依次执行
      //异步

      console.log(1);

      //延时0ms的异步操作
      queueMicrotask(function () {
        console.log("queueMicrotask");
      });

      setTimeout(() => {
        //延时器是异步的 （js中耗时操作都设计成了异步，不会卡主界面）
        console.log("setTimeout");
      }, 1000);

      //   for (let i = 0; i < 10000900; i++) {
      //     console.log(i);
      //   }
      console.log(2);

      /* 

   第一次宏任务   

      1--立刻执行 
      微任务队列[]
      宏任务队列[]

         //延时0ms的异步操作
      queueMicrotask(function () {
        console.log("queueMicrotask");
      });
      异步微任务，延时0ms， 会立刻放入 微任务队列 

       微任务队列[ fn-》log（queueMicrotask）  ]
       宏任务队列[]



        setTimeout(() => {
        //延时器是异步的 （js中耗时操作都设计成了异步，不会卡主界面）
        console.log("setTimeout");
      }, 1000);


      setTimeout异步宏任务--延时1000ms -交给浏览器去等，浏览器等这个任务作为以后才会，放入宏任务队列

         微任务队列[ fn-》log（queueMicrotask）  ]
       宏任务队列[]



       2-》立即执行


        微任务队列[ fn-》log（queueMicrotask）  ]
       宏任务队列[ ]



      


 第一次循环清空 微任务队列中所有微任务

        fn-》log（queueMicrotask） -》执行

        微任务队列[  ]
       宏任务队列[]

        1---2----queueMicrotas




        等于1000ms 以后， 延时器就到时间，然后，放入宏任务队列

           微任务队列[  ]
       宏任务队列[ log（settimeout）]

        然后事件循环又开始

        先一个宏，再清空微



        什么是事件循环：控制js同步和异步代码执行的一种机制
          先执行一个宏任务队列中宏任务，再清空微任务队列中所有微任务，这个过程会不停重复。
            
          第一次整个脚本会被当做一个宏任务执行




        

 

        







      
      */
    </script>
  </body>
</html>
