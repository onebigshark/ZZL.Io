<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Document</title>
  </head>
  <body>
    <script>
      //promise的链式调用
      new Promise(function (resolve, reject) {
        // ***这个参数函数里面可以写异步操作
        setTimeout(() => {
          //异步操作成功了 调用resolve  ,promise对象就知道了，promise内部异步操作成功了
          //****resolve(实参) 可以传递给then 里面函数的形参--
          console.log("延时器成功 红");

          resolve(99999);
          //***异步操作失败了，调用reject，然后 p.catch就会执行，并且 reject的实参，会给catch的形参
          // reject(11111);
        }, 2000);
      })
        .then(function (r) {
          console.log("p，then 1 ");

          // *********多个异步操作有顺序
          // new Promise（异步1）.then(new Prmise（异步2）).then(new Prmise（异步3）)、.then(new Prmise（异步4）).then
          //*****必须在上一个then中 返回一个新的promise对象，这个promise对象成功以后，就会执行下一个then
          return new Promise(function (r, j) {
            setTimeout(() => {
              console.log("绿");
              r();
            }, 2000);
          });
          //   then的返回值就是当前的promise对象
        })
        .then(function () {
          console.log("p，then 2 ");

          setTimeout(() => {
            console.log("黄");
          }, 2000);
        });

      // setTimeout(() => {
      //   console.log("红");

      //   setTimeout(() => {
        
      //     console.log("绿");
      //     setTimeout(() => {
      //       console.log("黄");
      //     }, 2000);
      //   }, 2000);
      // }, 2000);
    </script>
  </body>
</html>
