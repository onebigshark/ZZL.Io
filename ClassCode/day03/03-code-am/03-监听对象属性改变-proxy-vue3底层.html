<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Document</title>
  </head>
  <body>
    <script>
      let obj = {
        name: "zhangsna",
        age: 18,
      };

      //   Proxy 代理（代理原对象的所有操作） ，基于原对象，创建一个新的代理对象，以后操作代理对象，代理对象提供了监听 方法，setter 和getter
      /* 

       vue底层实现响应式（修改了数据，页面自动改变）的原理是什么

        vue2 使用 Object.defineProperty,实现了对属性的监听 
        vue3 使用proxy 实现对象属性的监听
        
        为什么要改
        vue2（不能监听数组的方法，重写数组方法解决这个问题）不能监听通过数组下标修改元素
        vue3 没有问题
      */
      let newObj = new Proxy(obj, {
        set(target, key, newValue) {
          console.log("set");
          //原对象
          console.log(target);
          //修改的属性的属性名
          console.log(key);
          //要赋值的 属性值
          console.log(newValue);
        },
        get() {
          console.log("get");
        },
      });
      newObj.name = "aa";
      newObj.name;
      newObj.age = 9;

      let arr = [1, 3, 4, 5];
      let newArr = new Proxy(arr, {
        set() {
          console.log("set- arr");
          //   set 必须return 否则会报错
          return true;
        },
        // get() {},
      });
      newArr.push(100);
      console.log(arr);
      //   console.log(newArr.push);
    </script>
  </body>
</html>
